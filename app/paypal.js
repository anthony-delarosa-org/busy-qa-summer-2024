"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["pull-requests-processing-indicator"],{27295:(e,t,r)=>{let n;r.d(t,{YT:()=>h,qP:()=>p,yM:()=>m});var a=r(88149),s=r(64307),i=r(31248),o=r(19963);let{getItem:l}=(0,i.Z)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,a.n)("octolytics");delete e.baseContext,n=new s.R(e)}catch(e){}function u(e){let t=(0,a.n)("octolytics").baseContext||{};if(t)for(let[e,r]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=r,delete t[e]);let r=document.querySelector("meta[name=visitor-payload]");for(let[e,n]of(r&&Object.assign(t,JSON.parse(atob(r.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=n);return t.staff=(0,o.B)().toString(),Object.assign(t,e)}function h(e){n?.sendPageView(u(e))}function p(e,t={}){let r=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,a=r?{service:r}:{};for(let[e,r]of Object.entries(t))null!=r&&(a[e]=`${r}`);n&&(u(a),n.sendEvent(e||"unknown",u(a)))}function m(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},31399:(e,t,r)=>{var n=r(657),a=r(85893),s=r(26415),i=r(42483),o=r(88216),l=r(74121),c=r(97011),d=r(51081),u=r(67294),h=r(91248),p=r(65628),m=r(62481),f=r(85529);let _={stale:!1,latest_unsynced_push_to_head_ref_at:null};function g({processingIndicatorUrl:e,repositoryId:t,pullRequestId:r}){let[n,o]=(0,u.useState)(_),l=(0,m.Z)(),c=(0,u.useCallback)(async()=>{try{let t=await (0,s.v5)(e);if(t.ok){let e=await t.json();l()&&o(e)}}catch(e){l()&&o(_)}},[l,e]);(0,u.useEffect)(()=>{c()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:h}=n;return(0,a.jsx)(i.Z,{sx:{mt:-2},children:(0,a.jsx)(p.n,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,a.jsx)(R,{pullRequestId:r,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:h})})})}function R({pullRequestId:e,repositoryId:t,stale:r,latest_unsynced_push_to_head_ref_at:n}){let{sendAnalyticsEvent:s}=(0,h.z)();if(!r||!n)return null;let u=new Date,p=new Date(n),m=Math.round(u.getTime()-p.getTime())/1e3;return m<20||m>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:m}),(0,a.jsx)(d.u,{text:"Recent push is still being processed, and will show up in a bit",direction:"s",children:(0,a.jsx)(o.r,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",sx:{color:"fg.muted"},trailingVisual:f.LinkExternalIcon,children:(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",fontWeight:400},children:[(0,a.jsx)(l.Z,{size:"small",sx:{color:"fg.muted"}}),(0,a.jsx)(c.Z,{sx:{color:"fg.muted",fontSize:0,ml:2},children:"Processing updates"})]})})}))}try{g.displayName||(g.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{R.displayName||(R.displayName="PullRequestsProcessingIndicator")}catch{}(0,n.t)("pull-requests-processing-indicator",{Component:g})},37428:(e,t,r)=>{r.d(t,{e:()=>DeferredRegistry});let DeferredRegistry=class DeferredRegistry{register(e,t){let r=this.registrationEntries[e];r?r.resolve?.(t):this.registrationEntries[e]={promise:Promise.resolve(t)}}getRegistration(e){var t;return(t=this.registrationEntries)[e]||(t[e]=new n),this.registrationEntries[e].promise}constructor(){this.registrationEntries={}}};let n=class Deferred{constructor(){this.promise=new Promise(e=>{this.resolve=e})}}},41475:(e,t,r)=>{r.d(t,{Ac:()=>s,Z_:()=>i,ev:()=>a});var n=r(67294);function a(e){return((0,n.useEffect)(()=>{let t=e?.anchor;t&&("disabled"in t&&(t.disabled=!1),t.classList.remove("cursor-wait"))},[e]),e)?{reactPartialAnchor:{__wrapperElement:e}}:{}}function s(e){let t=(0,n.useRef)(e.__wrapperElement.anchor||null),[r,a]=(0,n.useState)(!1),s=(0,n.useCallback)(()=>{a(!r)},[r,a]);return(0,n.useEffect)(()=>{t.current&&(t.current.setAttribute("aria-expanded",r.toString()),t.current.setAttribute("aria-haspopup","true"))},[t,r]),i(e,s),{ref:t,open:r,setOpen:a}}function i(e,t){let r=(0,n.useRef)(e.__wrapperElement.anchor);(0,n.useEffect)(()=>{let e=r.current;if(e)return e.addEventListener("click",t),()=>e.removeEventListener("click",t)},[r,t])}},657:(e,t,r)=>{r.d(t,{t:()=>c});let n=new(r(37428)).e;var a=r(85893),s=r(76006),i=r(338),o=r(78755);let l=class ReactPartialElement extends i.S{async getReactNode(e){var t;let{Component:r}=await (t=this.name,n.getRegistration(t)),s=this.closest("react-partial-anchor");return(0,a.jsx)(o.S,{partialName:this.name,embeddedData:e,Component:r,wasServerRendered:this.hasSSRContent,ssrError:this.ssrError,anchorElement:s})}constructor(...e){super(...e),this.nameAttribute="partial-name"}};function c(e,t){n.register(e,t)}l=function(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}([s.Ih],l)},68453:(e,t,r)=>{r.d(t,{Z:()=>o});let{getItem:n,setItem:a,removeItem:s}=(0,r(31248).Z)("localStorage"),i="REACT_PROFILING_ENABLED",o={enable:()=>a(i,"true"),disable:()=>s(i),isEnabled:()=>!!n(i)}},91248:(e,t,r)=>{r.d(t,{w:()=>o,z:()=>i});var n=r(67294),a=r(27295),s=r(1389);function i(){let e=(0,n.useContext)(s.f);if(!e)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:t,category:r,metadata:i}=e;return{sendAnalyticsEvent:(0,n.useCallback)((e,n,s={})=>{let o={react:!0,app_name:t,category:r,...i};(0,a.qP)(e,{...o,...s,target:n})},[t,r,i])}}function o(){let{sendAnalyticsEvent:e}=i();return{sendClickAnalyticsEvent:(0,n.useCallback)((t={})=>{e("analytics.click",void 0,t)},[e])}}},26415:(e,t,r)=>{function n(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let r={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:r})}function a(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return n(e,{...t,body:a,headers:r})}function s(e,t={}){let r={...t.headers,IS_REACT:"true"};return n(e,{...t,headers:r})}r.d(t,{QG:()=>n,aU:()=>s,v5:()=>a})},78755:(e,t,r)=>{r.d(t,{S:()=>m});var n=r(85893),a=r(67294),s=r(28234),i=r(12599),o=r(74747),l=r(89250),c=r(49250);function d({children:e,history:t}){let[r,s]=(0,a.useState)({location:t.location});return(0,c.g)(()=>t.listen(s),[t]),(0,n.jsx)(l.F0,{location:r.location,navigator:t,children:e})}try{d.displayName||(d.displayName="PartialRouter")}catch{}var u=r(63817),h=r(48827),p=r(41475);function m({partialName:e,embeddedData:t,Component:r,wasServerRendered:l,ssrError:c,anchorElement:m}){let f=a.useRef(),_=globalThis.window;f.current||(f.current=_?(0,h.l)({window:_}):(0,i.PP)({initialEntries:[{pathname:"/"}]}));let g=f.current,R=(0,p.ev)(m);return(0,n.jsx)(s.R,{appName:e,wasServerRendered:l,children:(0,n.jsx)(o.i,{history:g,routes:[],children:(0,n.jsxs)(d,{history:g,children:[(0,n.jsx)(r,{...t.props,...R}),(0,n.jsx)(u.P,{ssrError:c})]})})})}try{m.displayName||(m.displayName="PartialEntry")}catch{}},338:(e,t,r)=>{r.d(t,{S:()=>ReactBaseElement});var n=r(85893),a=r(76006),s=r(20745),i=r(67294),o=r(68453),l=r(86469),c=r(19963);function d(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}let u=RegExp("Minified React error #(?<invariant>\\d+)");let ReactBaseElement=class ReactBaseElement extends HTMLElement{get name(){return this.getAttribute(this.nameAttribute)}get embeddedDataText(){let e=this.embeddedData?.textContent;if(!e)throw Error(`No embedded data provided for react element ${this.name}`);return e}get hasSSRContent(){return"true"===this.getAttribute("data-ssr")}connectedCallback(){this.renderReact()}disconnectedCallback(){this.root?.unmount(),this.root=void 0}async renderReact(){if(!this.reactRoot)throw Error("No react root provided");let e={createRoot:s.s,hydrateRoot:s.a};o.Z.isEnabled()&&(e=await this.getReactDomWithProfiling());let t=JSON.parse(this.embeddedDataText),r=this.ssrError?.textContent,a=await this.getReactNode(t),l=(0,n.jsx)(i.StrictMode,{children:a});if(r&&this.logSSRError(r),this.hasSSRContent){let t=this.querySelector('style[data-styled="true"]');t&&document.head.appendChild(t),this.root=e.hydrateRoot(this.reactRoot,l,{onRecoverableError:e=>{if(!(e instanceof Error))return;let t=u.exec(e.message),r=String(t?.groups?.invariant);(0,c.b)({incrementKey:"REACT_HYDRATION_ERROR",incrementTags:{appName:this.name,invariant:r}})}}),t&&requestIdleCallback(()=>{t.parentElement?.removeChild(t)})}else this.root=e.createRoot(this.reactRoot),this.root.render(l);this.classList.add("loaded")}getReactDomWithProfiling(){return r.e("react-profiling").then(r.t.bind(r,62518,19))}logSSRError(e){if(l.t[e])return console.error("SSR failed with an expected error:",l.t[e]);try{let t=JSON.parse(e),r=function(e){if(!e.stacktrace)return"";let t="\n ";return e.stacktrace.map(e=>{let{function:r,filename:n,lineno:a,colno:s}=e,i=`${t} at ${r} (${n}:${a}:${s})`;return t=" ",i}).join("\n")}(t);console.error("Error During Alloy SSR:",`${t.type}: ${t.value}
`,t,r)}catch{console.error("Error During Alloy SSR:",e,"unable to parse as json")}}};d([a.fA],ReactBaseElement.prototype,"embeddedData",void 0),d([a.fA],ReactBaseElement.prototype,"ssrError",void 0),d([a.fA],ReactBaseElement.prototype,"reactRoot",void 0);try{u.displayName||(u.displayName="REACT_INVARIANT_ERROR_REGEX")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_octicons-react_di-b40d97","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_primer_re-2d72f8","ui_packages_react-core_create-browser-history_ts-ui_packages_safe-storage_safe-storage_ts-ui_-682c2c"],()=>t(31399)),e.O()}]);
//# sourceMappingURL=pull-requests-processing-indicator-eed2328bbe2e.js.map
